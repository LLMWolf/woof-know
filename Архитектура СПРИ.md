
# Архитектура WOOF-KNOW (СПРИ) - Структура проекта

## Корневая структура
```
woof-know-spri/
├── .github/ # CI/CD конфигурация
│   ├── workflows/
│   │   ├── ci.yml # Непрерывная интеграция
│   │   ├── cd.yml # Непрерывное развертывание  
│   │   └── security-scan.yml # Сканирование безопасности
│   └── ISSUE_TEMPLATE/
│       ├── bug_report.md
│       └── feature_request.md
├── docs/ # Документация
│   ├── architecture/ # Архитектурные решения
│   │   └── ADR-001-sqlite-decision.md
│   ├── api/ # API документация
│   │   └── openapi.yaml
│   └── deployment/ # Руководства по развертыванию
│       └── local-setup.md
├── src/ # Исходный код
│   ├── core/ # Ядро системы
│   │   ├── __init__.py
│   │   ├── orchestrator.py
│   │   └── config.py
│   ├── api/ # API слой
│   │   ├── __init__.py
│   │   ├── main.py
│   │   └── routes/
│   │       ├── ingest.py
│   │       ├── query.py
│   │       └── feedback.py
│   ├── ingest/ # Модуль обработки данных
│   │   ├── __init__.py
│   │   ├── manager.py
│   │   └── parsers/
│   │       ├── markdown.py
│   │       └── text.py
│   ├── llm/ # Интеграции с LLM
│   │   ├── __init__.py
│   │   ├── ollama_client.py
│   │   └── prompt_templates.py
│   ├── storage/ # Модули хранения данных
│   │   ├── __init__.py
│   │   ├── database.py
│   │   └── vector_store.py
│   ├── plugins/ # Система плагинов
│   │   ├── __init__.py
│   │   └── base.py
│   └── webui/ # Web интерфейс
│       ├── package.json
│       ├── next.config.js
│       └── src/
│           ├── app/
│           └── components/
├── tests/ # Тесты
│   ├── unit/ # Модульные тесты
│   │   ├── test_ingest.py
│   │   └── test_llm.py
│   ├── integration/ # Интеграционные тесты
│   │   └── test_api.py
│   └── fixtures/ # Тестовые данные
│       └── sample_documents/
├── config/ # Конфигурация
│   ├── settings/ # Настройки приложения
│   │   └── settings.json
│   ├── prompts/ # Шаблоны промптов
│   │   └── default.yaml
│   └── logging/ # Конфигурация логирования
│       └── logging.conf
├── scripts/ # Вспомогательные скрипты
│   ├── deployment/ # Скрипты развертывания
│   │   └── setup.sh
│   ├── migration/ # Миграции базы данных
│   │   └── init_db.py
│   └── monitoring/ # Скрипты мониторинга
│       └── health_check.py
├── data/ # Данные приложения
│   ├── cache/ # Кэш системы
│   ├── backups/ # Резервные копии
│   └── exports/ # Экспортированные данные
├── docker/ # Docker конфигурация
│   ├── compose/ # Docker Compose файлы
│   │   └── docker-compose.yml
│   ├── production/ # Продакшен образы
│   │   └── Dockerfile
│   └── development/ # Разработочные образы
│       └── Dockerfile
├── requirements.txt # Python зависимости
├── pyproject.toml # Конфигурация проекта Python
├── README.md # Основная документация
└── .env.example # Шаблон переменных окружения
```

# Описание файлов проекта WOOF-KNOW (СПРИ)

## Файлы CI/CD (.github/)

**ci.yml** - Пайплайн непрерывной интеграции: автоматическая сборка, запуск тестов, проверка качества кода и линтинг при каждом пулл-реквесте

**cd.yml** - Пайплайн непрерывного развертывания: автоматическое развертывание в тестовые и продакшен окружения после мержа в основные ветки

**security-scan.yml** - Автоматическое сканирование зависимостей на уязвимости, проверка секретов в коде и статический анализ безопасности

**bug_report.md** - Стандартизированный шаблон для отчетов об ошибках с полями для воспроизведения, окружения и логов

**feature_request.md** - Структурированный шаблон для предложений новых функций с обоснованием и критериями приемки

## Документация (docs/)

**ADR-001-sqlite-decision.md** - Архитектурное решение о выборе SQLite как основной БД с обоснованием, последствиями и альтернативами

**openapi.yaml** - Полная спецификация REST API в формате OpenAPI 3.1 с описанием всех эндпоинтов, схем и примеров

**local-setup.md** - Пошаговое руководство по локальной установке и настройке для разработчиков

## Исходный код - Ядро (src/core/)

**orchestrator.py** - Главный оркестратор системы: управляет пайплайном Q&A, координирует работу модулей и применяет политики приватности

**config.py** - Сервис загрузки, валидации и управления конфигурацией приложения на основе Pydantic моделей

## Исходный код - API (src/api/)

**main.py** - Точка входа FastAPI приложения с инициализацией middleware, роутеров и обработчиков ошибок

**ingest.py** - Эндпоинты для загрузки и индексации документов: /v1/ingest, управление пайплайнами обработки

**query.py** - Эндпоинты Q&A системы: /v1/query, обработка запросов, поиск и генерация ответов

**feedback.py** - Эндпоинты для сбора обратной связи: /v1/feedback, оценка качества ответов

## Исходный код - Обработка данных (src/ingest/)

**manager.py** - Менеджер пайплайнов индексации: координация парсеров, чанкинг, векторизация и обновление индексов

**markdown.py** - Парсер Markdown файлов с извлечением структуры, метаданных и вики-ссылок

**text.py** - Парсер текстовых файлов с поддержкой различных кодировок и форматов

## Исходный код - LLM (src/llm/)

**ollama_client.py** - Клиент для работы с локальными моделями через Ollama API: управление запросами, токенизацией и кэшированием

**prompt_templates.py** - Шаблоны промптов для различных сценариев: Q&A, суммаризация, классификация с поддержкой локализации

## Исходный код - Хранилища (src/storage/)

**database.py** - Драйвер работы с SQLite: управление соединениями, миграциями и транзакциями с WAL режимом

**vector_store.py** - Векторное хранилище для эмбеддингов: семантический поиск, индексация и управление похожестью

## Исходный код - Плагины (src/plugins/)

**base.py** - Базовые классы и интерфейсы для системы плагинов: контракты парсеров, ретриверов и верификаторов

## Исходный код - Web UI (src/webui/)

**package.json** - Метаданные Next.js приложения: зависимости, скрипты сборки и конфигурация

**next.config.js** - Конфигурация Next.js: настройки сборки, окружения и маршрутизации

## Тесты (tests/)

**test_ingest.py** - Модульные тесты парсеров и пайплайнов обработки данных

**test_llm.py** - Тесты LLM клиентов и шаблонов промптов

**test_api.py** - Интеграционные тесты API эндпоинтов и сценариев использования

## Конфигурация (config/)

**settings.json** - Основной файл настроек: политики приватности, параметры LLM, лимиты и пороги

**default.yaml** - Промпты по умолчанию для различных задач системы на русском языке

**logging.conf** - Конфигурация системы логирования: форматы, уровни и обработчики

## Скрипты (scripts/)

**setup.sh** - Скрипт первоначальной настройки системы: установка зависимостей, инициализация БД

**init_db.py** - Инициализация и миграция схемы базы данных, создание индексов

**health_check.py** - Скрипт проверки работоспособности всех компонентов системы

## Docker (docker/)

**docker-compose.yml** - Конфигурация для локальной разработки: оркестрация сервисов и сетей

**Dockerfile (production)** - Продакшен образ с оптимизацией размера и безопасности

**Dockerfile (development)** - Образ для разработки с отладочными инструментами и горячей перезагрузкой

## Корневые файлы

**requirements.txt** - Список Python зависимостей с зафиксированными версиями

**pyproject.toml** - Метаданные проекта Python: настройки инструментов, зависимости и скрипты

**README.md** - Основная документация проекта: быстрое начало, возможности и контрибьютинг

**.env.example** - Шаблон переменных окружения для настройки различных режимов работы